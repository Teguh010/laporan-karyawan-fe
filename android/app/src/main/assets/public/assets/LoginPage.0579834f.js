import{Q as y,a as p,b as w}from"./QPage.116c91c2.js";import{Q as h,a as g}from"./QForm.30c49008.js";import{F as L,y as f,o as b,c as x,w as l,G as Q,H as u,a as t,Q as k,I as P,J as U,K as V,L as o,M as d}from"./index.55ec1fa1.js";import{u as q}from"./use-quasar.485ffa18.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-key-composition.9a8b945e.js";const T={class:"row justify-center"},C={__name:"LoginPage",setup(B){const c=q(),v=Q(),m=L(),n=f(!0),r=f({username:"",password:""}),_=async()=>{var i,s;try{o.log("Starting login process..."),o.log("Testing connection with fetch...");const e=`${d.defaults.baseURL}/auth/login`;o.log("Test URL:",e);try{const a=await fetch(e,{method:"GET",headers:{Accept:"application/json"}});o.log("Fetch test response:",{status:a.status,statusText:a.statusText,headers:Object.fromEntries(a.headers.entries())})}catch(a){o.error("Fetch test failed:",{message:a.message,name:a.name,stack:a.stack})}o.log("Proceeding with login attempt:",{username:r.value.username,apiUrl:d.defaults.baseURL,headers:d.defaults.headers}),await m.login(r.value.username,r.value.password),o.log("Login successful"),c.notify({type:"positive",message:"Login successful"}),await v.replace("/")}catch(e){o.error("Login process failed:",{message:e.message,type:e.constructor.name,stack:e.stack});let a="Login failed";e.message==="Network Error"?a="Cannot connect to server. Please check your internet connection":(s=(i=e.response)==null?void 0:i.data)!=null&&s.message&&(a=e.response.data.message),c.notify({type:"negative",message:a,timeout:2e3})}};return(i,s)=>(b(),x(y,{class:"flex flex-center"},{default:l(()=>[u("div",T,[t(w,{class:"login-card q-pa-md"},{default:l(()=>[t(p,null,{default:l(()=>s[3]||(s[3]=[u("div",{class:"text-h6 text-center q-mb-md"},"Login",-1)])),_:1}),t(p,null,{default:l(()=>[t(h,{onSubmit:_,class:"q-gutter-md"},{default:l(()=>[t(g,{modelValue:r.value.username,"onUpdate:modelValue":s[0]||(s[0]=e=>r.value.username=e),label:"Username",rules:[e=>!!e||"Username is required"],outlined:""},null,8,["modelValue","rules"]),t(g,{modelValue:r.value.password,"onUpdate:modelValue":s[2]||(s[2]=e=>r.value.password=e),label:"Password",type:n.value?"password":"text",rules:[e=>!!e||"Password is required"],outlined:""},{append:l(()=>[t(k,{name:n.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[1]||(s[1]=e=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),u("div",null,[t(P,{label:"Login",type:"submit",color:"primary",class:"full-width",loading:U(m).loading},null,8,["loading"])])]),_:1})]),_:1}),s[4]||(s[4]=V(" version 6 "))]),_:1})])]),_:1}))}};var $=S(C,[["__scopeId","data-v-057df240"]]);export{$ as default};
