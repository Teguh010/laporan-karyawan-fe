import{Q as g,b as d,c as u,a as t}from"./QList.bdc0d16e.js";import{Q as b,a as y,b as w}from"./QPage.116c91c2.js";import{y as C,m as A,o as s,c as _,w as a,aK as I,H as i,aH as v,a as l,K as o,aj as f,aJ as N,aI as L,aL as Q,I as D}from"./index.55ec1fa1.js";import{Q as q}from"./QSpinnerDots.00537bd1.js";import{u as $}from"./laporan-store.890fae49.js";import{u as E}from"./use-quasar.485ffa18.js";const V={class:"q-pa-md"},H={key:0,class:"row q-col-gutter-md"},K={class:"col-12"},R={class:"col-12 col-md-6"},T={class:"col-12 col-md-6"},j={key:1,class:"text-center q-pa-md"},W={__name:"LaporanDetail",setup(z){const F=I(),x=$(),c=E(),n=C(null),B=async()=>{try{const r=await x.getLaporanDetail(F.params.id);console.log("Laporan data:",r),n.value=r}catch(r){console.error("Error loading laporan:",r),c.notify({type:"negative",message:"Gagal memuat detail laporan"})}},k=async r=>{try{if(r.url)window.open(r.url,"_blank"),c.notify({type:"positive",message:`Downloading ${r.name}`});else throw new Error("File URL not available")}catch(e){console.error("Error downloading file:",e),c.notify({type:"negative",message:`Failed to download ${r.name}`})}};return A(()=>{B()}),(r,e)=>(s(),_(b,{padding:""},{default:a(()=>[i("div",V,[n.value?(s(),v("div",H,[i("div",K,[l(w,null,{default:a(()=>[l(y,null,{default:a(()=>[e[4]||(e[4]=i("div",{class:"text-h6"},"Detail Laporan",-1)),l(g,null,{default:a(()=>[l(d,null,{default:a(()=>[l(u,null,{default:a(()=>[l(t,{caption:""},{default:a(()=>e[0]||(e[0]=[o("Nama Barang")])),_:1}),l(t,null,{default:a(()=>[o(f(n.value.namaBarang),1)]),_:1})]),_:1})]),_:1}),l(d,null,{default:a(()=>[l(u,null,{default:a(()=>[l(t,{caption:""},{default:a(()=>e[1]||(e[1]=[o("Nomor Barang")])),_:1}),l(t,null,{default:a(()=>[o(f(n.value.nomorBarang),1)]),_:1})]),_:1})]),_:1}),l(d,null,{default:a(()=>[l(u,null,{default:a(()=>[l(t,{caption:""},{default:a(()=>e[2]||(e[2]=[o("Nomor Surat")])),_:1}),l(t,null,{default:a(()=>[o(f(n.value.noSurat),1)]),_:1})]),_:1})]),_:1}),l(d,null,{default:a(()=>[l(u,null,{default:a(()=>[l(t,{caption:""},{default:a(()=>e[3]||(e[3]=[o("Tanggal Dibuat")])),_:1}),l(t,null,{default:a(()=>[o(f(new Date(n.value.createdAt).toLocaleDateString("id-ID")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),i("div",R,[l(w,null,{default:a(()=>[l(y,null,{default:a(()=>[e[6]||(e[6]=i("div",{class:"text-h6"},"Files Need Approve",-1)),l(g,null,{default:a(()=>{var m;return[(s(!0),v(N,null,L(n.value.needApproveFiles,p=>(s(),_(d,{key:p.path},{default:a(()=>[l(u,null,{default:a(()=>[l(t,null,{default:a(()=>[o(f(p.name),1)]),_:2},1024)]),_:2},1024),l(u,{side:""},{default:a(()=>[l(D,{flat:"",color:"primary",icon:"download",onClick:S=>k(p)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),(m=n.value.needApproveFiles)!=null&&m.length?Q("",!0):(s(),_(d,{key:0},{default:a(()=>[l(u,null,{default:a(()=>[l(t,null,{default:a(()=>e[5]||(e[5]=[o("No files available")])),_:1})]),_:1})]),_:1}))]}),_:1})]),_:1})]),_:1})]),i("div",T,[l(w,null,{default:a(()=>[l(y,null,{default:a(()=>[e[8]||(e[8]=i("div",{class:"text-h6"},"Files No Need Approve",-1)),l(g,null,{default:a(()=>{var m;return[(s(!0),v(N,null,L(n.value.noNeedApproveFiles,p=>(s(),_(d,{key:p.path},{default:a(()=>[l(u,null,{default:a(()=>[l(t,null,{default:a(()=>[o(f(p.name),1)]),_:2},1024)]),_:2},1024),l(u,{side:""},{default:a(()=>[l(D,{flat:"",color:"primary",icon:"download",onClick:S=>k(p)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),(m=n.value.noNeedApproveFiles)!=null&&m.length?Q("",!0):(s(),_(d,{key:0},{default:a(()=>[l(u,null,{default:a(()=>[l(t,null,{default:a(()=>e[7]||(e[7]=[o("No files available")])),_:1})]),_:1})]),_:1}))]}),_:1})]),_:1})]),_:1})])])):(s(),v("div",j,[l(q,{size:"40px",color:"primary"}),e[9]||(e[9]=i("div",{class:"q-mt-sm"},"Loading...",-1))]))])]),_:1}))}};export{W as default};
